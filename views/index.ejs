<!--
Auteur: Charles Leroux
Date: 10/04/2024
Fichier: index.ejs
Description: page du client pour le labo5
-->


<!DOCTYPE html>
<html>


<head>

  <title>
    <%= title %>
  </title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
    integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+"
    crossorigin="anonymous"></script>

  <link rel='stylesheet' href='/stylesheets/style.css' />
  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io.connect('http://localhost:3000');
  </script>
</head>

<body>
  <h1>
    <%= title %>
  </h1>
  <p>Welcome to <%= title %>
  </p>
  <div class="jumbotron">
    <table class="table" id="tableau">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Date de creation</th>
          <th scope="col">nom</th>
          <th scope="col">prix</th>
        </tr>
      </thead>

      <tbody id="ListItem">

      </tbody>

    </table>
  </div>

  <div class="jumbotron">
    <form form onsubmit="return false;">
      <div>
        <legend>Supprimer par ID</legend>
        <input type="number" name="delNumber" id="delNumber">
        <input type="submit" value="supprimer" id="poke1">
      </div>
      <br>
      <div>
        <legend>Supprimer par nom</legend>
        <input type="text" name="delName" id="delName">
        <input type="submit" value="supprimer" id="poke2">
      </div>
    </form>
  </div>
  <div class="jumbotron">
    <form form onsubmit="return false;">
      <div>
        <legend>ajouter un élément</legend>
        <input type="text" name="nameItem" id="nameItem">
        <input type="number" name="addPrice" id="addPrice">
        <input type="submit" value="ajouter" id="poke3">
      </div>
    </form>
  </div>
  <script>
    $('#poke1').click(function () {
      socket.emit('messageDeleteId', $('#delNumber').val());
    });

    $('#poke2').click(function () {
      socket.emit('messageDeleteName', $('#delName').val());
    });

    $('#poke3').click(function () {
      socket.emit('messageAdd', $('#nameItem').val() + '/' + $('#addPrice').val());
    });
    socket.on('liste', function (message) {
      $('#ListItem').html(message);
    });
  </script>
</body>

</html>